"use strict";function initPhotoSwipe(e){for(var t=!1,r=function(e){for(var t,r,i,n,a=e.childNodes,l=a.length,s=[],o=0;o<l;o++)1===(t=a[o]).nodeType&&(r=t.children[0]).getAttribute("href")&&(i=r.getAttribute("data-size").split("x"),n={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},r.children.length>0&&(n.msrc=r.children[0].getAttribute("src")),n.el=t,s.push(n));return s},i=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=(e.target||e.srcElement).closest(".product-images"),r=t.querySelectorAll(".image-item")[0];if(t.querySelector(".flickity-slider")&&(r=t.querySelector(".image-item.is-selected")),r){for(var i,n=r.parentNode,l=r.parentNode.childNodes,s=l.length,o=0,c=0;c<s;c++)if(1===l[c].nodeType){if(l[c]===r){i=o;break}o++}return i>=0&&a(i,n),!1}},n=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement;if("A"!==t.tagName.toUpperCase()){var r=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))}(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){for(var i,n=r.parentNode,l=r.parentNode.childNodes,s=l.length,o=0,c=0;c<s;c++)if(1===l[c].nodeType){if(l[c]===r){i=o;break}o++}return i>=0&&a(i,n),!1}}},a=function(e,i,n,a){var l,s,o,c=document.querySelector(".pswp");if(o=r(i),s={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=o[e].el.getElementsByTagName("img")[0],r=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+r,w:i.width}}},a){if(s.galleryPIDs){for(var u=0,d=o.length;u<d;u++)if(o[u].pid==e){s.index=u;break}}else s.index=parseInt(e,10)-1}else s.index=parseInt(e,10);!isNaN(s.index)&&(n&&(s.showAnimationDuration=0),(l=new PhotoSwipe(c,PhotoSwipeUI_Default,o,s)).init(),l.listen("gettingData",function(){if(!t){t=!0;var e=document.querySelectorAll(".pswp__thumbnails");e.length&&e.forEach(function(e){e.remove()}),setTimeout(function(){(function e(t){var r=t.scrollWrap,i=document.querySelector(".product-gallery"),n=document.createElement("div");if(n.classList.add("pswp__thumbnails"),i){var a=i.querySelector(".product-thumbnail-images-container");if(a){var l=a.querySelector(".flickity-slider");l?n.innerHTML=l.innerHTML:n.innerHTML=a.innerHTML}else Object.keys(t.items).forEach(function(e){var r=t.items[e],i=document.createElement("div"),a=document.createElement("img");a.setAttribute("src",r.msrc),i.classList.add("thumbnail-item"),i.appendChild(a),n.appendChild(i)});Object.keys(t.items).forEach(function(e){var r=n.children[e];r.removeAttribute("style"),r.classList.remove("is-selected","is-nav-selected"),t.getCurrentIndex()==e&&r.classList.add("active"),r.addEventListener("click",function(){t.goTo(t.items.indexOf(t.items[e]))})}),r.parentNode.insertBefore(n,r.nextSibling)}})(l)},200)}}),l.listen("close",function(){var e=l.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&(e.remove(),t=!1)}),l.listen("afterChange",function(){var e=l.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&Object.keys(l.items).forEach(function(t){var r=e.children[t];r.classList.remove("active"),l.getCurrentIndex()==t&&r.classList.add("active")})}))},l=document.querySelectorAll(e),s=0,o=l.length;s<o;s++){var c=l[s].closest(".product-images").querySelector(".photoswipe-toggle-button");l[s].setAttribute("data-pswp-uid",s+1),c.onclick=i,l[s].onclick=n}}initPhotoSwipe(".product-images-container");