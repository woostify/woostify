!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(t,e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=n(t,require("jquery")):t.lity=n(t,t.jQuery||t.Zepto)}("undefined"!=typeof window?window:this,function(e,c){"use strict";var u=e.document,f=c(e),y=c.Deferred,v=c("html"),p=[],m="aria-hidden",h="lity-"+m,o='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',g={esc:!0,handler:null,handlers:{image:C,inline:function(e,t){var n,i,o;try{n=c(e)}catch(e){return!1}return!!n.length&&(i=c('<i style="display:none !important"/>'),o=n.hasClass("lity-hide"),t.element().one("lity:remove",function(){i.before(n).remove(),o&&!n.closest(".lity-content").length&&n.addClass("lity-hide")}),n.removeClass("lity-hide").after(i))},youtube:function(e){var t=n.exec(e);return!!t&&k(x(e,d("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],c.extend({autoplay:1},s(t[5]||"")))))},vimeo:function(e){var t=i.exec(e);return!!t&&k(x(e,d("https://player.vimeo.com/video/"+t[3],c.extend({autoplay:1},s(t[4]||"")))))},googlemaps:function(e){var t=r.exec(e);return!!t&&k(x(e,d("https://www.google."+t[3]+"/maps?"+t[6],{output:0<t[6].indexOf("layer=c")?"svembed":"embed"})))},facebookvideo:function(e){var t=a.exec(e);if(!t)return!1;0!==e.indexOf("http")&&(e="https:"+e);return k(x(e,d("https://www.facebook.com/plugins/video.php?href="+e,c.extend({autoplay:1},s(t[4]||"")))))},iframe:k},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,n=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,i=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,r=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,a=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,l=function(){var e=u.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();function b(e){var t=y();return l&&e.length?(e.one(l,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function w(e,t,n){if(1===arguments.length)return c.extend({},e);if("string"==typeof t){if(void 0===n)return void 0===e[t]?null:e[t];e[t]=n}else c.extend(e,t);return this}function s(e){for(var t,n=decodeURI(e.split("#")[0]).split("&"),i={},o=0,r=n.length;o<r;o++)n[o]&&(i[(t=n[o].split("="))[0]]=t[1]);return i}function d(e,t){return e+(-1<e.indexOf("?")?"&":"?")+c.param(t)}function x(e,t){var n=e.indexOf("#");return-1===n?t:(0<n&&(e=e.substr(n)),t+e)}function C(e,t){function n(){r.reject(function(e){return c('<span class="lity-error"/>').append(e)}("Failed loading image"))}var i=t.opener()&&t.opener().data("lity-desc")||"Image with no description",o=c('<img src="'+e+'" alt="'+i+'"/>'),r=y();return o.on("load",function(){if(0===this.naturalWidth)return n();r.resolve(o)}).on("error",n),r.promise()}function k(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen allow="autoplay; fullscreen" src="'+e+'"/></div>'}function E(){return u.documentElement.clientHeight?u.documentElement.clientHeight:Math.round(f.height())}function j(e){var t=z();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&function(e,t){var n=t.element().find(o),i=n.index(u.activeElement);e.shiftKey&&i<=0?(n.get(n.length-1).focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n.get(0).focus(),e.preventDefault())}(e,t))}function D(){c.each(p,function(e,t){t.resize()})}function z(){return 0===p.length?null:p[0]}function T(e,t,n,i){var o,r,a,l=this,s=!1,d=!1;t=c.extend({},g,t),r=c(t.template),l.element=function(){return r},l.opener=function(){return n},l.options=c.proxy(w,l,t),l.handlers=c.proxy(w,l,t.handlers),l.resize=function(){s&&!d&&a.css("max-height",E()+"px").trigger("lity:resize",[l])},l.close=function(){if(s&&!d){d=!0,function(t){t.element().attr(m,"true"),1===p.length&&(v.removeClass("lity-active"),f.off({resize:D,keydown:j})),((p=c.grep(p,function(e){return t!==e})).length?p[0].element():c(".lity-hidden")).removeClass("lity-hidden").each(function(){var e=c(this),t=e.data(h);t?e.attr(m,t):e.removeAttr(m),e.removeData(h)})}(l);var e=y();if(i&&(u.activeElement===r[0]||c.contains(r[0],u.activeElement)))try{i.focus()}catch(e){}return a.trigger("lity:close",[l]),r.removeClass("lity-opened").addClass("lity-closed"),b(a.add(r)).always(function(){a.trigger("lity:remove",[l]),r.remove(),r=void 0,e.resolve()}),e.promise()}},o=function(n,i,o,e){var r,a="inline",l=c.extend({},o);return e&&l[e]?(r=l[e](n,i),a=e):(c.each(["inline","iframe"],function(e,t){delete l[t],l[t]=o[t]}),c.each(l,function(e,t){return!t||(!(!t.test||t.test(n,i))||(!1!==(r=t(n,i))?(a=e,!1):void 0))})),{handler:a,content:r||""}}(e,l,t.handlers,t.handler),r.attr(m,"false").addClass("lity-loading lity-opened lity-"+o.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){c(e.target).is("[data-lity-close]")&&l.close()}).trigger("lity:open",[l]),function(e){1===p.unshift(e)&&(v.addClass("lity-active"),f.on({resize:D,keydown:j})),c("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=c(this);void 0===e.data(h)&&e.data(h,e.attr(m)||null)}).attr(m,"true")}(l),c.when(o.content).always(function(e){a=c(e).css("max-height",E()+"px"),r.find(".lity-loader").each(function(){var e=c(this);b(e).always(function(){e.remove()})}),r.removeClass("lity-loading").find(".lity-content").empty().append(a),s=!0,a.trigger("lity:ready",[l])})}function O(e,t,n){e.preventDefault?(e.preventDefault(),e=(n=c(this)).data("lity-target")||n.attr("href")||n.attr("src")):n=c(n);var i=new T(e,c.extend({},n.data("lity-options")||n.data("lity"),t),n,u.activeElement);if(!e.preventDefault)return i}return C.test=function(e){return t.test(e)},O.version="2.4.0",O.options=c.proxy(w,O,g),O.handlers=c.proxy(w,O,g.handlers),O.current=z,c(u).on("click.lity","[data-lity]",O),O});