"use strict";if(void 0===e){var e={};e.carouselActionReady=[]}var galleries=document.querySelectorAll(".product-gallery");function woostifyStickySummary(e){if(woostify_woocommerce_general.enabled_sticky_product_summary){var t=!!e.classList.contains("has-product-thumbnails")&&e,i=!!document.body.classList.contains("has-gallery-list-layout")&&document.querySelector(".has-gallery-list-layout .product-summary");if(t&&i&&!(window.innerWidth<992)&&!(t.offsetHeight<=i.offsetHeight)){var a=new WSYSticky(".summary.entry-summary",{stickyContainer:".product-page-container",marginTop:parseInt(woostify_woocommerce_general.sticky_top_space),marginBottom:parseInt(woostify_woocommerce_general.sticky_bottom_space)});return jQuery("form.variations_form").on("found_variation",function(){a.update()}),a}}}function renderSlider(e,t){return!(!e||e.classList.contains("flickity-enabled"))&&!(e.querySelectorAll(t.cellSelector).length<2)&&new Flickity(e,t)}window.addEventListener("load",function(){galleries&&(galleries.forEach(function(e,t){woostifyStickySummary(e)}),setTimeout(function(){window.dispatchEvent(new Event("resize"))},200))});class WoostifyGallery{constructor(e,t){var i=this;return"string"==typeof e&&(e=document.querySelector(e)),i.el=e,i.mobileSlider={},i.imageCarousel={},i.thumbCarousel={},i.options=t,i.sliderOptions={...t.main},i.thumbOptions={...t.thumb},i.init(),i}init(){var e=this,t=e.el;e.productThumbnails=e.getProductThumbnails(),e.checkDragable(),e.noSliderLayout=t.classList.contains("column-style")||t.classList.contains("grid-style"),e.prevBtn=document.createElement("button"),e.nextBtn=document.createElement("button"),e.initSlider(),e.events()}initSlider(){var e=this;if(e.el,e.noSliderLayout)e.woostifyGalleryCarouselMobile();else{if(e.productThumbnails=e.getProductThumbnails(),!e.productThumbnails)return!1;e.sliderOptions.on={ready:function(){e.changeImageCarouselButtonIcon(),e.calculateVerticalSliderHeight()}},e.imageCarousel=e.renderSlider(e.sliderOptions.container,e.sliderOptions),e.galleryThumbnailCarousel()}"function"==typeof easyZoomHandle&&easyZoomHandle(),"function"==typeof initPhotoSwipe&&initPhotoSwipe(".product-images-container"),setTimeout(function(){window.dispatchEvent(new Event("resize"))},200)}renderSlider(e,t){return!!e&&new Flickity(e,t)}createImages(e,t,i){var a='<figure class="image-item ez-zoom" itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">';return a+="<a href="+e+" data-size="+i+' itemprop="contentUrl" data-elementor-open-lightbox="no">',a+="<img src="+t+' itemprop="thumbnail">',a+="</a>",a+="</figure>"}createThumbnails(e){var t='<div class="thumbnail-item">';return t+='<img src="'+e+'">',t+="</div>"}changeImageCarouselButtonIcon(){var e=this.el,t=e.querySelector(".flickity-button.next"),i=e.querySelector(".flickity-button.previous");t&&(t.innerHTML=this.options.next_icon),i&&(i.innerHTML=this.options.prev_icon)}woostifyGalleryCarouselMobile(){var e=this,t=e.el;(!(window.innerWidth>991)||t.classList.contains(".has-product-thumbnails"))&&(e.sliderOptions.on={ready:function(){e.changeImageCarouselButtonIcon()}},e.mobileSlider=new Flickity(t.querySelector(".product-images-container"),e.sliderOptions))}calculateVerticalSliderHeight(){var e=this,t=e.el;if(window.matchMedia("( min-width: 768px )").matches&&t.classList.contains("vertical-style")){var i=t.querySelector(".image-item img");e._setVerticalSliderHeight(i),e.waitImageLoad(i,t=>{e._setVerticalSliderHeight(t)}).then(e=>{}).catch(e=>{console.error("Error loading image",e)})}}_setVerticalSliderHeight(e){var t=e?e.offsetHeight:0,i=this.getProductThumbnails();t&&(i.style.maxHeight=t+"px")}isImageOk(e){return!!e.complete&&(void 0===e.naturalWidth||0!=e.naturalWidth)}async waitImageLoad_v2(e,t){var i=0,a=0;a=setInterval(function(){IsImageOk(e)&&i<20&&((e?e.offsetHeight:0)&&_setVerticalSliderHeight(e),clearInterval(a)),i++},200)}async waitImageLoad(e,t){return new Promise((i,a)=>{e.addEventListener("load",()=>{t(e),i(e)}),e.addEventListener("error",a)})}galleryThumbnailCarousel(){this.horizontalThumbnailCarousel()||this.verticalThumbnailCarousel()}verticalThumbnailCarousel(){var e=this,t=e.el,i=e.getProductThumbnails();if(i){var a=e.thumbOptions;window.matchMedia("( max-width: 767px )").matches?e.thumbCarousel=new Flickity(i,a):t.classList.contains("vertical-style")?(e.calculateVerticalSliderHeight(),e.verticalThumbnailSliderAction(e),e.addThumbButtons()):e.thumbCarousel=new Flickity(i,a)}}verticalThumbnailSliderAction(){var e=this.getProductThumbnails(),t=e.querySelectorAll(".thumbnail-item"),i=this.imageCarousel;t[0].classList.add("is-nav-selected"),t[0].classList.add("is-selected"),t.forEach(function(e,t){e.addEventListener("click",function(){i.select(t)})});var a=0<i.selectedIndex?t[i.selectedIndex].offsetHeight:t[0].offsetHeight,r=e.offsetHeight;i.on("change",function(){e.querySelectorAll(".thumbnail-item").forEach(function(e){e.classList.remove("is-nav-selected","is-selected")});var s=0<=i.selectedIndex?t[i.selectedIndex]:t[0];s.classList.add("is-nav-selected","is-selected");var n=s.offsetTop+e.scrollTop-(r+a)/2;e.scrollTo({top:n,behavior:"smooth"})})}addThumbButtons(){var e=this;e.el;var t=e.getProductThumbnails().parentElement;e.prevBtn.classList.add("thumb-btn","thumb-prev-btn","prev"),e.prevBtn.innerHTML=e.options.vertical_prev_icon,e.nextBtn.classList.add("thumb-btn","thumb-next-btn","next"),e.nextBtn.innerHTML=e.options.vertical_next_icon,t.appendChild(e.prevBtn),t.appendChild(e.nextBtn),e.displayThumbButtons(),e.changeImageCarouselButtonEvents()}displayThumbButtons(){var e=this,t=e.getProductThumbnails(),i=t.querySelectorAll(".thumbnail-item"),a=0;i.length&&i.forEach(function(e){var t=e.offsetHeight;t+=parseInt(window.getComputedStyle(e).getPropertyValue("margin-top")),t+=parseInt(window.getComputedStyle(e).getPropertyValue("margin-bottom")),a+=t}),a>t.offsetHeight?(t.classList.add("has-buttons"),e.nextBtn.style.display="block",e.prevBtn.style.display="block"):(t.classList.remove("has-buttons"),e.nextBtn.style.display="none",e.prevBtn.style.display="none")}horizontalThumbnailCarousel(){var e=this,t=e.el,i=!1;if(e.productThumbnails=e.getProductThumbnails(),e.productThumbnails){var a=e.productThumbnails,r=e.thumbCarousel,s=e.thumbOptions;if(t.classList.contains("horizontal-style")||window.matchMedia("( max-width: 767px )").matches){var n=a.querySelectorAll(".thumbnail-item"),l=0;n.length&&n.forEach(function(e){var t=e.offsetWidth;t+=parseInt(window.getComputedStyle(e).getPropertyValue("margin-left")),t+=parseInt(window.getComputedStyle(e).getPropertyValue("margin-right")),l+=t}),l>=a.offsetWidth?(s.groupCells="60%",s.wrapAround=!0):(s.groupCells="3",s.wrapAround=!1),r&&r.slider&&r.destroy(),e.thumbCarousel=new Flickity(e.productThumbnails,s),i=!0}return i}}resetCarousel(){this.imageCarousel||this.imageCarousel.slider||imageCarousel.select(0),this.mobileSlider||this.mobileSlider.slider||mobileSlider.select(0)}updateGallery(e,t,i,a=!1){var r=this.el;if(!(!e.length||document.documentElement.classList.contains("quick-view-open"))){r.classList.add("loading");for(var s="",n="",l=this.imageCarousel||{},o=this.thumbCarousel||{},c=this.mobileSlider||{},u=0,d=e.length;u<d;u++)if(t){var h=e[u].full_src_w+"x"+e[u].full_src_h;s+=this.createImages(e[u].full_src,e[u].src,h),n+=e.length>1?this.createThumbnails(e[u].gallery_thumbnail_src):""}else if(i&&i==e[u][0].variation_id){if(1>=e[u].length-1){n="";for(var m=1,g=e[u].length;m<g;m++){var h=e[u][m].full_src_w+"x"+e[u][m].full_src_h;s+=this.createImages(e[u][m].full_src,e[u][m].src,h)}}else for(var m=1,g=e[u].length;m<g;m++){var h=e[u][m].full_src_w+"x"+e[u][m].full_src_h;s+=this.createImages(e[u][m].full_src,e[u][m].src,h),n+=e[u].length>1?this.createThumbnails(e[u][m].gallery_thumbnail_src):""}}l&&l.slider&&l.destroy(),o&&o.slider&&o.destroy(),c&&c.slider&&c.destroy();var p=new Image;if(r.style.opacity="1",s&&r.querySelector(".product-images")&&(r.querySelector(".product-images").querySelector(".product-images-container").innerHTML=s),r.querySelector(".product-thumbnail-images")){if(r.querySelector(".product-thumbnail-images").style.opacity="0",""!==n){var y=r.querySelector(".product-thumbnail-images").querySelector(".product-thumbnail-images-container");y||(y=document.createElement("div")).classList.add("product-thumbnail-images-container"),y.classList.remove("flickity-enabled"),r.querySelector(".product-thumbnail-images").innerHTML="",r.querySelector(".product-thumbnail-images").appendChild(y).innerHTML=n,r.querySelector(".product-gallery")&&r.querySelector(".product-gallery").classList.add("has-product-thumbnails"),r.classList.contains("product-gallery")&&r.classList.add("has-product-thumbnails")}else r.querySelector(".product-thumbnail-images").innerHTML=""}this.initSlider(),a?(p.onload=function(){setTimeout(()=>{r.classList.remove("loading"),r.querySelector(".product-thumbnail-images").style.opacity="1"},300)},p.src=a):setTimeout(()=>{r.classList.remove("loading"),r.querySelector(".product-thumbnail-images").style.opacity="1"},300)}}checkDragable(){window.matchMedia("( min-width: 768px )").matches&&this.el.classList.contains("vertical-style")&&(this.thumbOptions.draggable=!1)}getProductThumbnails(){var e=this,t=e.el;return"string"==typeof this.thumbOptions.asNavFor&&t.querySelector(e.thumbOptions.asNavFor)&&(e.thumbOptions.asNavFor=t.querySelector(e.thumbOptions.asNavFor)),"string"==typeof this.sliderOptions.container&&t.querySelector(e.sliderOptions.container)&&(e.sliderOptions.container=t.querySelector(e.sliderOptions.container)),"string"==typeof this.thumbOptions.container&&t.querySelector(e.thumbOptions.container)&&(e.thumbOptions.container=t.querySelector(e.thumbOptions.container)),"string"!=typeof this.thumbOptions.container&&this.thumbOptions.container}events(){var e=this;e.el,window.addEventListener("resize",function(){e.checkDragable()}),e.changeImageCarouselButtonEvents(),e.listenResetVariations(),e.listenFoundVariations()}changeImageCarouselButtonEvents(){var e=this,t=e.el.querySelectorAll(".thumb-btn");t.length&&t.forEach(function(t){t.addEventListener("click",function(){this.classList.contains("prev")?e.imageCarousel.previous():e.imageCarousel.next()})})}listenFoundVariations(){var e=this,t=e.el;e.listEvents=e.listEvents||{},!e.listEvents.found_variation&&(jQuery("form.variations_form").on("found_variation",function(i,a){if("undefined"!=typeof woostify_variation_gallery&&woostify_variation_gallery.length)e.updateGallery(woostify_variation_gallery,!1,a.variation_id);else if(a.variation_gallery_images){var r=t.querySelector(".product-thumbnail-images");if(a.variation_gallery_images.length>1||a.variation_gallery_images.length&&a.image&&a.variation_gallery_images[0].full_src!=a.image.full_src){var s=a.image.src;e.updateGallery(a.variation_gallery_images,!0,a.variation_id,s),r&&r.classList.add("variation-gallery")}else if("undefined"!=typeof woostify_default_gallery&&woostify_default_gallery.length){var n=[];a.image?(n.push(a.image),woostify_default_gallery.forEach(function(e,t,i){t&&n.push(e)},n)):n=woostify_default_gallery,e.updateGallery(e,n,!0),r&&r.classList.remove("variation-gallery")}}var l=e.thumbCarousel,o=e.imageCarousel;t.classList.contains("horizontal-style")&&(o&&o.slider&&o.select(0),l&&l.slider&&l.select(0))}),e.listEvents.found_variation=1)}listenResetVariations(){var e=this,t=e.el;e.listEvents=e.listEvents||{},!e.listEvents.reset_variations&&(jQuery(".reset_variations").on("click",function(){"undefined"!=typeof woostify_default_gallery&&woostify_default_gallery.length&&(e.updateGallery(woostify_default_gallery,!0),t.querySelector(".product-thumbnail-images")&&t.querySelector(".product-thumbnail-images").classList.remove("variation-gallery")),e.resetCarousel(),setTimeout(function(){window.dispatchEvent(new Event("resize"))},200),(document.body.classList.contains("elementor-editor-active")||document.body.classList.contains("elementor-editor-preview"))&&!t.querySelector(".product-thumbnail-images-container")&&t.querySelector(".product-gallery").classList.remove("has-product-thumbnails")}),e.listEvents.reset_variations=!0)}}var woostifyGalleries=[];document.addEventListener("DOMContentLoaded",function(){!e.productImagesReady&&(galleries.forEach(function(e,t){var i=new WoostifyGallery(e,woostify_product_images_slider_options);woostifyGalleries.push(i)}),"function"==typeof onElementorLoaded&&onElementorLoaded(function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/global",function(){setTimeout(function(){document.querySelectorAll(".product-gallery").forEach(function(e,t){renderSlider(e.querySelector(woostify_product_images_slider_options.main.container),woostify_product_images_slider_options)})},200)})}),e.productImagesReady=1)});